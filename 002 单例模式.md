# 单例模式（Singleton Pattern）
## 前言
:smile: 按照 001 篇讲的，以后的每个模式都将按照：模式名称、问题、解决方案以及效果这几个主要的要素研究。 <br>
- 学习难度：:smirk::smirk::smirk::smirk::smirk:
- 使用频率：:wink::wink::wink::wink::wink:

开始吧
## 模式名称
中文：单例模式<br>
English: Singleton Pattern<br>
含义：单例对象的类必须保证只有一个实例存在。
## 问题
### 何时使用
当我们需要统一管理资源，共享资源的时候就需要使用单例模式。保障

场景：
1. Windows的Task(任务管理器) 就是很经典的单例模式。一台电脑正常情况下只能打开一个任务管理器。
2. 网站的计数器，一般也采用单例模式实现，否则难以同步。
3. 应用程序的日志应用，一般都才会用单例模式实现，这通常是由于共享的日志文件一直处于打开状态，因为只能有一个实例去操作，否则内容不好追加。
4. Web应用的配置对象的读取，一般也应用单例模式，这个是由于配置文件是共享的资源。
5. 数据库连接池的设计一般也是采用单例模式，因为数据库连接是一种数据库资源。数据库软件系统中使用数据库连接池，主要是节省打开或者关闭数据库连接所引起的效率损耗，这种效率上的损耗还是非常昂贵的，因为何用单例模式来维护，就可以大大降低这种损耗。
6. 多线程的线程池的设计一般也是采用单例模式，这是由于线程池要方便对池中的线程进行控制。
7. 操作系统的文件系统，也是大的单例模式实现的具体例子，一个操作系统只能有一个文件系统。
8. HttpApplication 也是单例的典型应用。熟悉ASP.Net(IIS)的整个请求生命周期的人应该知道HttpApplication也是单例模式，所有的HttpModule都共享一个HttpApplication实例.

### 存在的问题
- 优点
   - 单例模式提供了唯一实例的受控访问，因为单例模式封装了他的唯一实例，所以他可以严格控制客户怎样以及何时访问它。
   - 由于系统中只存在一个资源，对于一些需要频繁创建和销毁的对象单例模式可以提高性能。
   - 允许可变数目的实例。基于单例模式我们可以进行扩展，使用与单例模式相似的方法来来获得指定个数的对象实例，既节省系统资源，又解决了单例对象共享过多有损性能的问题。
- 缺点
  - 由于单例模式没有抽象层，因此单例类的扩展有很大的困难。
  - 单例类的职责过重，在一定程度上违背了‘单一职责的原则’。因为单例类既承担了工厂的角色，提供了工厂方法，又充当了产品的角色，包含了一些业务方法，将产品的创建和产品本身的功能融合到一起。
  - 现在很多面相对象语言的运行环境都提供了自动垃圾回收的技术，因此，如果实例化的共享对象长时间不被利用，系统会认为他是垃圾，自动销毁回收。下次使用时再重新实例化，这将导致共享的单例对象状态的丢失。

> 请带着问题找答案:stuck_out_tongue_winking_eye:。

## 解决方案
> 来个UML图先

![Singleton UML][SingletonUML]


[SingletonUML]:(/SingletonUML.png)
## 效果
